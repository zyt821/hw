function decodeBase64() {
    const encodedString = document.getElementById('encodedString').value;
    const resultElement = document.getElementById('result');

    if (!encodedString.trim()) {
        resultElement.innerText = '请输入要解码的字符串。';
        return;
    }

    try {
        // Step 1: URL 解码 (很重要!)
        const urlDecodedString = decodeURIComponent(encodedString.replace(/\+/g, '%20'));

        // Step 2: Base64 解码
        const base64DecodedString = atob(urlDecodedString);

        // Step 3: 为了处理 UTF-8 字符，进行进一步解码
        const finalResult = decodeURIComponent(escape(base64DecodedString));

        resultElement.innerText = finalResult;

    } catch (e) {
        resultElement.innerText = '解码失败。请检查输入的字符串是否正确。\n错误信息: ' + e.message;
    }
}
